import os
import os.path
import shutil
import time

source_dir = r"C:\JX3\bin\zhcn\interface\LR_Plugin"
target_dir = r"i:\鍓戠綉3鎻掍歡鍒朵綔\鎻愪氦鎻愪氦鎻愪氦鎻愪氦" + "\\" + time.strftime("%Y%m%d") + "\\LR_Plugin"
ignor = shutil.ignore_patterns("*.py", "*.pyc", "*.key", "*.dat", "*.bak", "@DATA", ".idea", "__pycache__", "*鍓湰*", "Usrdata", ".git", ".gitignore")

if os.path.exists(target_dir):
    shutil.rmtree(target_dir)

shutil.copytree(source_dir, target_dir, ignore=ignor)

zip_command = "7z a " + r"i:\鍓戠綉3鎻掍歡鍒朵綔\鎻愪氦鎻愪氦鎻愪氦鎻愪氦" + "\\" + time.strftime("%Y%m%d") + "\\LR_Plugin.zip " + r"i:\鍓戠綉3鎻掍歡鍒朵綔\鎻愪氦鎻愪氦鎻愪氦鎻愪氦" + "\\" + time.strftime("%Y%m%d") + "\\LR_Plugin"
os.system(zip_command)
shutil.rmtree(r"i:\鍓戠綉3鎻掍歡鍒朵綔\鎻愪氦鎻愪氦鎻愪氦鎻愪氦" + "\\" + time.strftime("%Y%m%d") + "\\LR_Plugin")

